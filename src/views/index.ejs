<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home  |  Funkoshop</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@glidejs/glide/dist/css/glide.core.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@glidejs/glide/dist/css/glide.theme.min.css">
    <link rel="stylesheet" type="text/css" href="/css/reset.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    <link rel="stylesheet" type="text/css" href="/css/header.css">
    <link rel="stylesheet" type="text/css" href="/css/footer.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    
</head>
<body>    
    <%- include('../views/partials/header')%>
    <main class="main-container">
        <section class="hero">
            <article class="hero__content container">
                <h3 class="hero__title">Nuevos Ingresos</h3>
                <p class="hero__text">Descubrí el próximo Funko Pop de tu colección</p>
                <a class="hero__link" href="/productos">SHOP</a>
            </article>
        </section>
        <section class="collection container">
            <article class="collection__content">
                <h3 class="collection__title">Star Wars & The Mandalorian</h3>
                <p class="collection__text">Disfruta de una saga que sigue agregando personajes a su colección</p>
                <a class="collection__link" href="/productos">VER COLECCIÓN</a>
            </article>
            <picture class="collection__cover">
                <img src="./img/star-wars/baby-yoda-1.webp" alt="Figura coleccionable Funko de Grogu de la serie The Mandalorian">
            </picture>
        </section>
        <section class="collection container">
            <article class="collection__content">
                <h3 class="collection__title">POKEMON INDIGO</h3>
                <p class="collection__text">Atrapa todos los que puedas y disfruta de una colección llena de amigos.</p>
                <a class="collection__link" href="/productos">VER COLECCIÓN</a>
            </article>
            <picture class="collection__cover">
                <img src="./img/pokemon/vulpix-1.webp" alt="Figura coleccionable Funko de Vulpix de la serie Pokemon">
            </picture>
        </section>
        <section class="collection container">
            <article class="collection__content">
                <h3 class="collection__title">HARRY POTTER</h3>
                <p class="collection__text">Revive los recuerdos de una saga llena de magia y encanto.</p>
                <a class="collection__link" href="/productos">VER COLECCIÓN</a>
            </article>
            <picture class="collection__cover">
                <img src="./img/harry-potter/snape-patronus-1.webp" alt="Figura coleccionable Funko del patronus de Snape en la película de Harry Potter">
            </picture>
        </section>
        <!-- Contenido principal (80% del ancho) -->
        <section class="slider container glide">
            <h2 class="slider__title">Últimos lanzamientos</h2>
            <div class="glide__track" data-glide-el="track">
                <ul id="productos-container" class="slider__items">
                    <% productos.forEach(producto => { %>
                        <li class="slider__item glide__slide">
                            <article class="card-item">
                                <a class="card-item__link" href="<%= producto.url %>">
                                    <picture class="card-item__cover">
                                        <% const rutaCompletaFront = producto.imagen_front; %>
                                        <% const rutaCompletaBack = producto.imagen_back; %>
                                        <% const rutaRelativaFront = rutaCompletaFront.replace('public', ''); %>
                                        <% const rutaRelativaBack = rutaCompletaBack.replace('public', ''); %>
                                        
                                        <span class="card-item__tag"><%='Nuevo' %></span>
                                        <img class="card-item__img--front" src="<%= rutaRelativaFront %>" alt="<%= producto.nombre %>">
                                        <img class="card-item__img--back" src="<%= rutaRelativaBack %>" alt="<%= producto.nombre %> en caja">
                                    </picture>
                                    <div class="card-item__content">
                                        <p class="card-item__licence"><%= producto.categoria %></p>
                                        <h4 class="card-item__name"><%= producto.nombre %></h4>
                                        <% if (typeof producto.precio === 'number') { %>
                                            <p class="card-item__price">$ <%= producto.precio.toFixed(2) %>.-</p>
                                        <% } else { %>
                                            <p class="card-item__price">Precio no disponible</p>
                                        <% } %>
                                        <div class="card-item__promo"><%= producto.cuotas %></div>
                                    </div>
                                </a>
                            </article>
                        </li>
                    <% }); %>
                </ul>
            </div>
            <div class="glide__arrows" data-glide-el="controls">
                <button class="glide__arrow glide__arrow--left" data-glide-dir="<"><iconify-icon icon="ic:round-chevron-left"></iconify-icon></button>
                <button class="glide__arrow glide__arrow--right" data-glide-dir=">"><iconify-icon icon="ic:round-chevron-right"></iconify-icon></button>
            </div>
        </section>
    </main>
    <%- include('../views/partials/footer')%>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@glidejs/glide"></script> 
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Inicializar el carrusel con los productos obtenidos
            new Glide('.glide', {
                type: 'carousel',
                startAt: 0,
                perView: 3,
                gap: 30,
                breakpoints: {
                    991: {
                        perView: 2
                    },
                    768: {
                        perView: 1
                    }
                }
            }).mount();
        });
    </script>
</body>
</html>

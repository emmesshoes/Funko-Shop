<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Home  |  Funkoshop</title>
      
        

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

        <link rel="stylesheet" href="../CSS/reset.css">
        <link rel="stylesheet" href="../CSS/index.css">
        <link rel="stylesheet" href="../CSS/carrito-de-compras.css">
        <link rel="stylesheet" href="../CSS/footer.css"> 
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    </head>
<body>     
  <%- include('../views/partials/header')%>

  <main>
    <div class="container" style="display: flex; flex-direction: column; align-items: center; width: 100%; ">
  
      <!-- Primera sección -->
      <div class="section" style="margin-bottom: 10px;">
        <div class="summary-box">
          <!-- Sección de elementos del carrito -->
          <div class="section">
            <div class="row-campos" >
              <div class="column">Detalle del Producto</div>
              <div class="column">Cantidad</div>
              <div class="column">Total</div>
            </div>
  
            <% productosInfo.forEach(info => { %>
              <% if (info.producto && info.producto.id_producto !== null) { %>
                <div class="row" >
  
                  <div class="column">
                    <% const rutaCompletaFront = info.producto.imagen_front; %>
                    <% const rutaRelativaFront = rutaCompletaFront.replace('public', ''); %>
                    <% console.log(rutaRelativaFront) %>
                    <img src="<%= rutaRelativaFront %>" alt="Miniatura" style="width: 100px; height: auto;">
                    <%= info.producto.nombre %>
                  </div>
                  
                  <div class="column">
                    <span class="quantity-container" id=<%= info.elemento.id_producto %>>
                      <%= info.elemento.cantidad %>
                    </span>
                    <div class="quantity-button-container">
                      <button class="quantity-button" onclick="updateQuantity(<%= info.elemento.id_producto %>, 'increment')">+</button>
                      <button class="quantity-button" onclick="updateQuantity(<%= info.elemento.id_producto %>, 'decrement')">-</button>
                    </div>
                  </div>
  
                  <div class="column">
                    <div style="display: flex; "> $<%= info.elemento.cantidad * info.elemento.precio_unitario %></div>
                  </div>
                  
                </div>
              <% } %>
            <% }); %>
          </div>
        </div>
      </div>
  
      <!-- Segunda sección -->
      <div class="section" style="display: flex; flex-direction: column; ">
        <div class="summary-title" style="margin-bottom: 10px; align-self: flex-end;">RESUMEN</div>
        
          <div class="summary-list" style="margin-bottom: 10px; align-self: flex-end;">
            <div class="summary-column" style="text-align: left;">Cantidad de elementos</div>
            <div class="summary-column" style="text-align: right;"><%= cantidadTotal %></div>
            <div class="summary-line2" style="text-align: left;"></div>
            <div class="summary-column" style="text-align: left;">Subtotal</div>
            <div class="summary-column" style="text-align: right;">$<%= subTotal %></div>
            <div class="summary-line2" style="text-align: left;"></div>
            <div class="summary-column" style="text-align: left;">ENVÍO</div>
            <div class="summary-column" style="text-align: right;">$<%= costoEnvio %></div>
            <div class="summary-line" style="text-align: left;"></div>
            <div class="summary-column" style="text-align: left;">TOTAL</div>
            <div class="summary-column" style="text-align: right;">$<%= totalPagar %></div>
          </div>
          <div class="container-button">
            <button class="summary-button" >IR A PAGAR</button>
          </div>
       
      </div> 
    </div>
  </main>
  

    <%- include('../views/partials/footer')%>

    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>

    <script src="/public/js/carrito.js"></script>
  </body>
</html>
